<!DOCTYPE html>
<html lang="da">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Breeze - Dashboard</title>
    <link rel="icon" type="image/svg+xml" href="favicon.svg" />
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#667eea">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Breeze">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/windows-dialog.css">
    <link rel="stylesheet" href="css/mobile.css">
    <!-- Quill.js Rich Text Editor -->
    <link href="https://cdn.quilljs.com/1.3.6/quill.snow.css" rel="stylesheet">
    <script src="https://cdn.quilljs.com/1.3.6/quill.js"></script>
</head>
<body>
    <div class="dashboard">
        <nav class="top-nav">
            <img src="logobreeze.png" alt="Breeze Logo" class="logo-nav">
            <div class="nav-right">
                <div class="user-info">
                    <div class="user-avatar" id="navAvatar">TB</div>
                    <span id="navUserName">Test Bruger</span>
                </div>
                <button class="logout-btn" onclick="logout()">Log ud</button>
            </div>
        </nav>

        <div class="main-content">
            <aside class="sidebar">
                <h3>Menu</h3>
                <div class="menu-item" onclick="showPage('feed')">📰 Feed</div>
                <div class="menu-item" onclick="showPage('profile')">📊 Min Profil</div>
                <div class="menu-item" onclick="showPage('files')">📁 Filer</div>
                <div class="menu-item" onclick="showPage('chat')">💬 Chat & Video</div>
                <div class="menu-item" onclick="showPage('colleagues')">👥 Kolleger</div>
                <div class="menu-item" onclick="showPage('quotes')">📦 Ordrestyring</div>
                <div class="menu-item" onclick="showPage('email')">✉️ Email</div>
                <div class="menu-item" onclick="showPage('time')">⏰ Min Tid</div>
                <div class="menu-item" id="materialsMenuItem" onclick="showPage('materials')" style="display: none;">💰 Materialer</div>
                <div class="menu-item" onclick="showPage('settings')">⚙️ Indstillinger</div>
                <div class="menu-item" id="adminMenuItem" onclick="showPage('admin')" style="display: none;">🛡️ Admin Panel</div>
            </aside>

            <main class="content-area">
                <!-- Dynamic page content loads here -->
                <div id="pageContainer"></div>
            </main>
        </div>
    </div>

    <!-- Image Modal -->
    <div id="imageModal" class="image-modal" onclick="closeImageModal()">
        <span class="close-modal">&times;</span>
        <img id="modalImage" src="" alt="">
    </div>

    <!-- Floating Video Call Overlay (Discord/Teams style) -->
    <div class="floating-video-call" id="floatingVideoCall">
        <div class="floating-video-header" id="floatingVideoHeader">
            <h4 id="floatingCallTitle">Videoopkald</h4>
            <div class="floating-video-header-buttons">
                <button onclick="toggleFloatingMinimize()" title="Minimer">−</button>
                <button onclick="endFloatingCall()" title="Luk">×</button>
            </div>
        </div>
        
        <div class="floating-video-body" id="floatingVideoBody">
            <div class="floating-video-placeholder" id="floatingPlaceholder">
                <div class="initials">📹</div>
                <p>Forbinder...</p>
            </div>
        </div>
        
        <div class="floating-local-video" id="floatingLocalVideo" style="display: none;">
            <video autoplay muted playsinline></video>
        </div>
        
        <div class="floating-video-controls">
            <button class="floating-control-btn floating-mic-btn" id="floatingMicBtn" onclick="toggleFloatingMic()" title="Mikrofon">🎤</button>
            <button class="floating-control-btn floating-cam-btn" id="floatingCamBtn" onclick="toggleFloatingCam()" title="Kamera">📹</button>
            <button class="floating-control-btn floating-share-btn" id="floatingShareBtn" onclick="floatingShareScreen()" title="Del skærm">🖥️</button>
            <button class="floating-control-btn floating-end-btn" onclick="endFloatingCall()" title="Læg på">📞</button>
        </div>
    </div>

    <!-- Windows Style Dialog -->
    <div class="windows-dialog-overlay" id="windowsDialogOverlay"></div>
    <div class="windows-dialog" id="windowsDialog">
        <div class="windows-dialog-title">
            <span id="windowsDialogTitle">Besked</span>
            <button class="windows-dialog-close" onclick="closeWindowsDialog()">×</button>
        </div>
        <div class="windows-dialog-content">
            <div class="windows-dialog-icon" id="windowsDialogIcon">ℹ️</div>
            <div class="windows-dialog-text" id="windowsDialogText"></div>
        </div>
        <div class="windows-dialog-buttons" id="windowsDialogButtons"></div>
    </div>

    <!-- Load all JavaScript modules -->
    <script src="js/pwa-init.js"></script>
    <script src="https://cdn.socket.io/4.5.4/socket.io.min.js"></script>
    <script src="js/page-loader.js"></script>
    <script src="js/dashboard.js"></script>
    <script src="js/profile.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/feed.js"></script>
    <script src="js/chat.js"></script>
    <script src="js/files-real.js"></script>
    <script src="js/colleagues.js"></script>
    <script src="js/videocall.js"></script>
    <script src="js/email.js"></script>
    <!-- Quotes system - modular -->
    <script src="js/quotes/quotes-utils.js"></script>
    <script src="js/quotes/quotes-core.js"></script>
    <script src="js/quotes/quotes-customers.js"></script>
    <script src="js/quotes/quotes-invoices.js"></script>
    <script src="js/quotes/quotes-workspace.js"></script>
    <script src="js/theme.js"></script>
</body>
</html>
